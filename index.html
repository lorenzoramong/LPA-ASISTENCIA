<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LPA ‚Äì Asistencia</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#ef4444">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="LPA Asistencia">
  <link rel="apple-touch-icon" href="app-icon.png.jpg">
</head>
<body class="bg-red-50">

  <!-- MODAL LOGIN -->
  <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded shadow max-w-sm w-full">
      <h2 class="text-xl font-bold mb-4 text-center text-red-600">Iniciar Sesi√≥n</h2>
      <form id="login-form" class="space-y-4">
        <div>
          <label class="block text-gray-700">Correo</label>
          <input type="email" id="login-email" required class="w-full px-3 py-2 border rounded">
        </div>
        <div>
          <label class="block text-gray-700">Contrase√±a</label>
          <input type="password" id="login-password" required class="w-full px-3 py-2 border rounded">
        </div>
        <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded">Ingresar</button>
      </form>
      <p id="login-error" class="text-red-500 text-sm mt-2 hidden"></p>
    </div>
  </div>

  <!-- CONTENIDO DE LA APP -->
  <div id="app-content" class="hidden">
    <div class="max-w-3xl mx-auto p-4">
      <div class="flex justify-between items-center mb-4">
        <h1 class="text-3xl font-bold text-red-600">LPA ‚Äì Asistencia</h1>
        <button id="logout-btn" class="bg-gray-300 hover:bg-gray-400 text-black px-3 py-1 rounded text-sm">Cerrar Sesi√≥n</button>
      </div>

      <!-- Tabs -->
      <div class="flex space-x-2 mb-4">
        <button class="tab-button active bg-red-500 text-white px-4 py-2 rounded" data-tab="asistencia-tab">Registro de Asistencia</button>
        <button class="tab-button bg-gray-200 px-4 py-2 rounded" data-tab="jugadores-tab">Jugadores</button>
      </div>

      <!-- TAB 1: Asistencia -->
      <div id="asistencia-tab" class="tab-content active">
        <div class="bg-white p-4 rounded shadow mb-4">
          <form id="attendance-form" class="space-y-4">
            <div>
              <label class="block text-gray-700">Jugador</label>
              <select id="select-nombre" required class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="">Selecciona un jugador...</option>
              </select>
            </div>
            <div>
              <label class="block text-gray-700">Tipo</label>
              <select id="select-tipo" required class="w-full px-3 py-2 border border-gray-300 rounded">
                <option value="">Selecciona...</option>
                <option value="A tiempo">A tiempo</option>
                <option value="Tarde">Tarde</option>
                <option value="Ausente">Ausente</option>
              </select>
            </div>
            <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded">Registrar</button>
          </form>
        </div>

        <div class="bg-white p-4 rounded shadow mb-4">
          <div class="flex justify-between items-center mb-2">
            <h2 class="text-lg font-semibold text-gray-800">Registros actuales</h2>
            <button id="export-csv" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm">Exportar CSV</button>
          </div>
          <table id="records-table" class="w-full text-sm border-collapse">
            <thead>
              <tr class="bg-red-100">
                <th class="border px-2 py-1">Nombre</th>
                <th class="border px-2 py-1">Horario</th>
                <th class="border px-2 py-1">Tipo</th>
                <th class="border px-2 py-1">Fecha y Hora</th>
                <th class="border px-2 py-1 only-desktop">Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- TAB 2: Jugadores -->
      <div id="jugadores-tab" class="tab-content hidden">
        <div class="bg-white p-4 rounded shadow mb-4">
          <form id="jugador-form" class="space-y-4">
            <div>
              <label class="block text-gray-700">Nombre</label>
              <input type="text" id="input-nombre-jugador" required class="w-full px-3 py-2 border border-gray-300 rounded" />
            </div>
            <div>
              <label class="block text-gray-700">Apellido</label>
              <input type="text" id="input-apellido-jugador" required class="w-full px-3 py-2 border border-gray-300 rounded" />
            </div>
            <div>
              <label class="block text-gray-700">Horario</label>
              <input type="text" id="input-horario" required class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="Ej. 17:00 - 19:00" />
            </div>
            <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded">Registrar Jugador</button>
          </form>
        </div>

        <div class="bg-white p-4 rounded shadow mb-4">
          <h2 class="text-lg font-semibold text-gray-800 mb-2">Jugadores Registrados</h2>
          <table id="jugadores-table" class="w-full text-sm border-collapse">
            <thead>
              <tr class="bg-red-100">
                <th class="border px-2 py-1">Nombre</th>
                <th class="border px-2 py-1">Apellido</th>
                <th class="border px-2 py-1">Horario</th>
                <th class="border px-2 py-1">Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCR423gNHR_Wb5kE65bSum_R542IJ3cN6I",
      authDomain: "academia-lpa.firebaseapp.com",
      projectId: "academia-lpa",
      storageBucket: "academia-lpa.firebasestorage.app",
      messagingSenderId: "311766682135",
      appId: "1:311766682135:web:c76ca5330cf30132076a52",
      measurementId: "G-194YH0TR6E"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    const loginModal = document.getElementById("login-modal");
    const appContent = document.getElementById("app-content");
    const loginForm = document.getElementById("login-form");
    const loginError = document.getElementById("login-error");
    const logoutBtn = document.getElementById("logout-btn");

    // LOGIN
    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("login-email").value;
      const password = document.getElementById("login-password").value;

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        const user = userCredential.user;

        if (user.email === "ligapadelatlantico@gmail.com") {
          loginModal.style.display = "none";
          appContent.classList.remove("hidden");
        } else {
          loginError.textContent = "Acceso denegado.";
          loginError.classList.remove("hidden");
          await signOut(auth);
        }
      } catch (err) {
        loginError.textContent = "Error: " + err.message;
        loginError.classList.remove("hidden");
      }
    });

    // CERRAR SESI√ìN
    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
    });

    // CONTROL SESI√ìN
    onAuthStateChanged(auth, (user) => {
      if (user && user.email === "ligapadelatlantico@gmail.com") {
        loginModal.style.display = "none";
        appContent.classList.remove("hidden");
      } else {
        loginModal.style.display = "flex";
        appContent.classList.add("hidden");
      }
    });

    // Resto de tu c√≥digo (tabs, jugadores, asistencia, export CSV) ...
    // üî• (no lo quit√©, sigue igual que en tu versi√≥n actual)
  </script>

  <style>
    @media (max-width: 768px) {
      .only-desktop {
        display: none;
      }
    }
  </style>
</body>
</html>























